<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>movie api</title>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

</head>
<body>
    <button>순위 보기</button>
    <!-- 영화 진흥위원회 API를 가져와서
    일일 박스오피스 영화 TOP 10의
    순위, 영화 이름, 개봉일 출력 
    rank , movieNm, openDT -->

    <!-- https://www.kobis.or.kr/kobisopenapi/homepg/apiservice/searchServiceInfo.do -->

    <script>
        // ajax -> 비동기 통신 방법

        // jQuery 에 접근 -> $.
        // ajax 메소드 사용 -> ajax()
        let url1 = 'http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=20230807'
    
        $(document).on('click','button',()=>{
            $.ajax({
                // url -> 어디랑 통신할 건지
                url : url1,
                // type -> 어떤 방식으로 통신할 건지 (get/post) ,우선 지금은 생략
                // success -> 통신 성공 시,  response의 줄임말 res
                success : (res)=>{
                    // console.log(res.boxOfficeResult.dailyBoxOfficeList);
                    let movieList = res.boxOfficeResult.dailyBoxOfficeList;

                    for(movieItem of movieList){
                        console.log(
                                movieItem.rank,
                                movieItem.movieNm,
                                movieItem.openDt
                                );
                    }
                        

                },
                // error -> 통신 실패 시  (url이 이상하거나)
                error : ()=>{
                    console.log('error'); 
                }
            })
        })
    </script>
</body>
</html>